<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Abrir no navegador</title>

  <!-- Evita cache agressivo do webview (não é garantia; headers no servidor são melhores) -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    :root{
      --bg:#0b0b0b;
      --card:#151515;
      --text:#f2f2f2;
      --muted:#bdbdbd;
      --btn:#ffffff;
      --btnText:#111;
      --outline:rgba(255,255,255,.16);
      --ok:#2ecc71;
      --warn:#f1c40f;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 20% 0%, rgba(255,255,255,.08), transparent 55%),
                  radial-gradient(900px 500px at 80% 10%, rgba(255,255,255,.06), transparent 50%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }
    .card{
      width:min(540px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--outline);
      border-radius:18px;
      padding:20px;
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }
    .logo{
      width:42px;height:42px;border-radius:14px;
      background: rgba(255,255,255,.12);
      display:grid;place-items:center;
      border:1px solid var(--outline);
      font-weight:700;
    }
    h1{font-size:20px;margin:0}
    p{margin:10px 0;color:var(--muted);line-height:1.45}
    .buttons{display:flex;flex-direction:column;gap:10px;margin-top:14px}
    a.button, button.button{
      appearance:none;
      border:none;
      width:100%;
      padding:14px 14px;
      border-radius:14px;
      text-decoration:none;
      cursor:pointer;
      font-weight:700;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    a.primary{background:var(--btn); color:var(--btnText)}
    a.secondary, button.secondary{
      background:transparent;
      color:var(--text);
      border:1px solid var(--outline);
    }
    .note{
      margin-top:14px;
      padding:12px;
      border-radius:14px;
      border:1px solid var(--outline);
      background: rgba(0,0,0,.25);
      font-size:14px;
    }
    .badge{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      font-size:12px;
      border:1px solid var(--outline);
      margin-right:8px;
    }
    .badge.warn{color:var(--warn)}
    .badge.ok{color:var(--ok)}
    .tiny{font-size:12px;color:var(--muted);margin-top:10px}
    code{color:#fff}
  </style>
</head>
<body>
  <main class="card">
    <div class="brand">
      <div class="logo">MF</div>
      <div>
        <h1>Abrir o site no navegador externo</h1>
        <div class="tiny" id="uaLine"></div>
      </div>
    </div>

    <p>
      Para evitar a tela branca do navegador interno do Instagram, use um dos botões abaixo.
      <b>Não redirecionamos automaticamente</b> — o clique do usuário é o que funciona melhor.
    </p>

    <div class="buttons">
      <!-- Link padrão (pode abrir interno no Instagram; ainda assim é útil fora do app) -->
      <a class="button primary" id="btnNormal" href="#" target="_blank" rel="noopener noreferrer">
        Abrir agora
      </a>

      <!-- Android (tenta “forçar” navegador externo via intent:// -> Chrome) -->
      <a class="button secondary" id="btnAndroid" href="#">
        Abrir no Chrome (Android)
      </a>

      <!-- Copiar -->
      <button class="button secondary" id="btnCopy" type="button">
        Copiar link
      </button>
    </div>

    <div class="note" id="note">
      <span class="badge warn">Instagram</span>
      Se ainda abrir dentro do Instagram: toque no menu <b>⋯</b> (ou ícone do navegador) e escolha
      <b>“Abrir no navegador”</b>.
      <br><br>
      <span class="badge ok">Dica</span>
      Alguns aparelhos têm a opção do Instagram de <b>abrir links em navegador externo</b> nas permissões do app.
    </div>

    <p class="tiny">
      Destino: <code id="destinoTxt"></code>
    </p>
  </main>

  <script>
    // ✅ TROQUE AQUI
    const DESTINO = "https://www.ministeriofamanvesperanca.com.br";

    // Helpers
    const $ = (id) => document.getElementById(id);

    // Detecta in-app browsers comuns (Instagram/Facebook)
    function isInAppBrowser() {
      const ua = navigator.userAgent || "";
      return /Instagram|FBAN|FBAV|FB_IAB|FBIOS|FB4A/i.test(ua);
    }
    function isAndroid() {
      return /Android/i.test(navigator.userAgent || "");
    }
    function isiPhone() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent || "");
    }

    // Monta intent para Android/Chrome
    // Ex: intent://www.exemplo.com/#Intent;scheme=https;package=com.android.chrome;end
    function buildAndroidIntent(url) {
      try {
        const u = new URL(url);
        const hostAndPath = (u.host + u.pathname + u.search + u.hash).replace(/^\/+/, "");
        return `intent://${hostAndPath}#Intent;scheme=${u.protocol.replace(":", "")};package=com.android.chrome;end`;
      } catch (e) {
        return url;
      }
    }

    // Set links
    $("destinoTxt").textContent = DESTINO;

    const btnNormal = $("btnNormal");
    btnNormal.href = DESTINO;

    const btnAndroid = $("btnAndroid");
    btnAndroid.href = buildAndroidIntent(DESTINO);

    // Esconde botão Android se não for Android
    if (!isAndroid()) btnAndroid.style.display = "none";

    // Mensagens contextuais
    const uaLine = $("uaLine");
    if (isInAppBrowser()) {
      uaLine.textContent = "Detectamos abertura dentro do Instagram/Facebook (webview).";
    } else {
      uaLine.textContent = "Você está em um navegador normal.";
      // Se não estiver no in-app, nem precisa do botão intent
      if (btnAndroid) btnAndroid.style.display = "none";
      $("note").innerHTML =
        `<span class="badge ok">Ok</span> Você já está em um navegador externo. Pode clicar em <b>Abrir agora</b>.`;
    }

    // Copiar link
    $
